(this["webpackJsonpreact-krpano-examples"]=this["webpackJsonpreact-krpano-examples"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n.n(a),i=n(23),o=n.n(i),s=n(12),l=(n(32),n(2)),u=(n(33),n(7)),d=(n(34),function(e){var t=e.className,n=void 0===t?"":t,a=e.justifyContent,r=e.children;return Object(c.jsx)("div",{className:"flex-container h-stack ".concat(n),style:{justifyContent:a},children:r})}),j=function(e){var t=e.className,n=void 0===t?"":t,a=e.justifyContent,r=e.children;return Object(c.jsx)("div",{className:"flex-container v-stack ".concat(n),style:{justifyContent:a},children:r})},p=function(e){var t=e.flex,n=e.children;return Object(c.jsx)("div",{className:"flex-item",style:{flex:t},children:n})},h=(n(35),function(e){var t=e.children,n=e.path,a=e.exact,r=Object(l.g)({path:n,exact:a});return Object(c.jsx)("div",{className:"aside-menu-item ".concat(r?"active":""),children:Object(c.jsx)(s.b,{className:"aside-menu-item-link",to:n,children:t})})}),b=function(){var e=a.useState(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],i=a.useCallback((function(){r(!n)}),[n,r]);return Object(c.jsx)("aside",{className:"app-aside ".concat(n?"collapsed":""),children:Object(c.jsxs)(j,{children:[Object(c.jsx)("div",{className:"aside-title",children:"React Krpano Examples"}),Object(c.jsxs)(j,{className:"aside-menu",children:[Object(c.jsx)(h,{path:"/load-xml",children:"\u52a0\u8f7dXML"}),Object(c.jsx)(h,{path:"/switch-scene",children:"\u5207\u6362\u573a\u666f"}),Object(c.jsx)(h,{path:"/multires",children:"\u591a\u5206\u8fa8\u7387"}),Object(c.jsx)(h,{path:"/dynamic-hotspot",children:"\u52a8\u6001\u70ed\u70b9"})]}),Object(c.jsxs)("div",{className:"aside-toggle-bar",onClick:i,children:[Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{})]})]})})},f=(n(41),function(){return Object(c.jsx)("a",{href:"https://github.com/0xLLLLH/react-krpano-examples",target:"_blank",className:"github-corner","aria-label":"View source on Github",children:Object(c.jsxs)("svg",{viewBox:"0 0 250 250","aria-hidden":"true",children:[Object(c.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),Object(c.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),Object(c.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"octo-body"})]})})}),m=n(8),v=n(15),O=n(25),g=n(26),x=n(14),y=n(16),k=n.n(y),w=n(10),C=n.n(w),P=r.a.createContext(null),E=r.a.createContext(null),N=/["'&<>]/,S=function(e){var t,n=""+e,c=N.exec(n);if(!c)return n;var a="",r=0,i=0;for(r=c.index;r<n.length;r++){switch(n.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==r&&(a+=n.substring(i,r)),i=r+1,a+=t}return i!==r?a+n.substring(i,r):a};var L=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];return"".concat(e,"(").concat(n.map((function(e){return"".concat(e)})).join(", "),");")},I=function(){},D=function e(t){var n=t.tag,c=t.attrs,a=t.children,r=Object.keys(c).map((function(e){return"".concat(e.toLowerCase(),'="').concat(c[e],'"')})).join(" ");return a&&a.length?"<".concat(n," ").concat(r,">").concat(a.map((function(t){return e(t)})).join(""),"</").concat(n,">"):"<".concat(n," ").concat(r," />")},_=function(e,t){return Object.assign.apply(Object,[{}].concat(Object(v.a)(Object.keys(e).map((function(n){var c=e[n];return t(n,c)})))))},U=function(e,t){return _(e,(function(e,n){return e.startsWith("on")&&"function"===typeof n?Object(x.a)({},e,t(e,n)):{}}))},H=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ReactKrpanoActionProxy";Object(O.a)(this,e),this.name=void 0,this.krpanoRenderer=void 0,this.eventHandlers=[],this.krpanoRenderer=t,this.name=n}return Object(g.a)(e,[{key:"call",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=n?"nexttick(".concat(e,")"):e;null===(t=this.krpanoRenderer)||void 0===t||t.call(c)}},{key:"set",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];this.call(L.apply(void 0,["set",e].concat(n)))}},{key:"setTag",value:function(e,t,n){var c=!1;"hotspot"!==e&&"events"!==e||(c=!0),this.call(function(e,t){return Object.keys(t).map((function(n){var c=t[n];if(n=n.toLowerCase(),void 0===c)return"";var a='"';return c.toString().includes(a)&&(a="'"),"style"===n?"assignstyle(".concat(e,", ").concat(c,");"):"boolean"===typeof c||"number"===typeof c?"set(".concat(e,".").concat(n,", ").concat(c,");"):"set(".concat(e,".").concat(n,", ").concat(a).concat("content"===n?c:S(c.toString())).concat(a,");")})).filter((function(e){return!!e})).join("")}(t?"".concat(e,"[").concat(t,"]"):e,n),c)}},{key:"get",value:function(e){var t;return null===(t=this.krpanoRenderer)||void 0===t?void 0:t.get(e)}},{key:"loadScene",value:function(e){this.call(L("loadscene",e,"null","MERGE","BLEND(0.5)"))}},{key:"removeScene",value:function(e){this.get("scene")&&"function"===typeof this.get("scene").removeItem&&this.get("scene").removeItem(e)}},{key:"addHotspot",value:function(e,t){this.call(L("addhotspot",e),!0),this.setTag("hotspot",e,t)}},{key:"removeHotspot",value:function(e){this.call(L("removehotspot",e),!0)}},{key:"on",value:function(e,t,n){return this.eventHandlers.push({eventName:e.toLowerCase(),selector:t,handler:n}),this}},{key:"off",value:function(e,t,n){this.eventHandlers=this.eventHandlers.filter((function(c){return!(c.eventName===e.toLowerCase()&&c.selector===t&&c.handler===n)}))}},{key:"fire",value:function(e,t){var n=this;this.eventHandlers.filter((function(n){return n.eventName===e.toLowerCase()&&n.selector===t})).map((function(e){return(0,e.handler)(n)}))}},{key:"bindEvents",value:function(e,t){var n=this;Object.keys(t).map((function(c){var a=t[c];a&&n.on(c,e,a)}))}},{key:"unbindEvents",value:function(e,t){var n=this;Object.keys(t).map((function(c){var a=t[c];a&&n.off(c,e,a)}))}}]),e}(),A=function(e){var t,n=e.className,c=e.currentScene,a=e.target,i=void 0===a?"krpano":a,o=e.id,s=e.xml,l=e.onReady,d=e.children,j=r.a.useState(null),p=Object(u.a)(j,2),h=p[0],b=p[1],f=r.a.useCallback((function(e){var t=new H(e);window[t.name]=t,b(t),I("Renderer ready."),l&&l(t)}),[s]);return t={target:i,id:o,xml:s||null,onready:f},r.a.useEffect((function(){var e={html5:"prefer",xml:null,consolelog:!1};if("function"!==typeof window.embedpano)throw new Error("Krpano required");"function"===typeof window.embedpano&&window.embedpano(Object.assign({},e,t))}),[t.target,t.xml]),r.a.createElement(E.Provider,{value:h},r.a.createElement(P.Provider,{value:c||null},r.a.createElement("div",{id:i,className:n,style:n?{}:{width:"100vw",height:"100vh"}},h?d:null)))};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}var K=function(e){var t=e.children,n=C()(e,["children"]),c=Object(a.useContext)(E);return r.a.useEffect((function(){null===c||void 0===c||c.setTag("view",null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))}),[n]),r.a.createElement("div",{className:"view"},t)};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(e){var t=e.name,n=e.previewUrl,c=e.imageTagAttributes,i=void 0===c?{}:c,o=e.images,s=void 0===o?[]:o,l=e.content,u=e.children,d=Object(a.useContext)(E),j=Object(a.useContext)(P);return r.a.useEffect((function(){var e,c={tag:"image",attrs:i,children:[]};if(s.length>1)(e=c.children).push.apply(e,Object(v.a)(s.map((function(e){var t=e.tiledImageWidth,n=e.tiledImageHeight,c=e.tileSize,a=e.asPreview,r={tag:"level",attrs:{tiledImageWidth:t,tiledImageHeight:n,asPreview:void 0!==a&&a},children:[{tag:e.type,attrs:q({},C()(e,["tiledImageWidth","tiledImageHeight","tileSize","asPreview","type"]))}]};return c&&(r.attrs=Object.assign(r.attrs,{tileSize:c})),r}))));else if(1===s.length){var a=s[0],r=a.type,o=C()(a,["type"]);c.children.push({tag:r,attrs:q({},o)})}return null===d||void 0===d||d.setTag("scene",t,{content:l||"".concat(n?'<preview url="'.concat(n,'" />'):"").concat(s.length>0?D(c):"")}),function(){null===d||void 0===d||d.removeScene(t)}}),[d,t,s,i,l]),r.a.useEffect((function(){j===t&&(null===d||void 0===d||d.loadScene(t),I("Scene ".concat(t," loaded due to currentScene change.")))}),[t,d,j]),r.a.createElement("div",{className:"scene"},j===t?u:null)};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){var t=e.name,n=e.children,c=C()(e,["name","children"]),i=Object(a.useContext)(E),o="hotspot[".concat(t,"]");return r.a.useEffect((function(){var e=_(F({},c),(function(e,t){return e.startsWith("on")&&"function"===typeof t?Object(x.a)({},e,t):{}}));return null===i||void 0===i||i.bindEvents(o,e),null===i||void 0===i||i.addHotspot(t,{}),function(){null===i||void 0===i||i.unbindEvents(o,e),null===i||void 0===i||i.removeHotspot(t)}}),[]),r.a.useEffect((function(){null===i||void 0===i||i.setTag("hotspot",t,Object.assign(F({},c),U(F({},c),(function(e){return"js(".concat(null===i||void 0===i?void 0:i.name,".fire(").concat(e,",").concat(o,"))")})))),I("hotspot ".concat(t," updated due to attrs change"))}),[i,t,c,o]),r.a.createElement("div",{className:"hotspot"},n)};n(43);var B=function(){var e=r.a.useState([]),t=Object(u.a)(e,2),n=t[0],a=t[1],i=r.a.useState(null),o=Object(u.a)(i,2),s=o[0],l=o[1],d=r.a.useCallback((function(){a([].concat(Object(v.a)(n),[{name:"hotspot".concat(n.length),ath:(null===s||void 0===s?void 0:s.get("view.hlookat"))||0,atv:(null===s||void 0===s?void 0:s.get("view.vlookat"))||0,style:"hotspot-style"}]))}),[n,s]);return Object(c.jsxs)("div",{className:"page-dynamic-hotspot",children:[Object(c.jsx)(A,{xml:"".concat("/react-krpano-examples","/xml/dynamic-hotspot.xml"),className:"pano",currentScene:"scene0",onReady:l,children:Object(c.jsx)(Q,{name:"scene0",images:[{type:"cube",url:"https://qhyxpicoss.kujiale.com/r/2017/09/01/L3D221IS3QKUQUQBOGAPEK3P3XU888_7500x1250.jpg_%s"}],children:n.map((function(e){return Object(c.jsx)(M,Object(m.a)({},e),e.name)}))})}),Object(c.jsx)("div",{className:"action-bar",children:Object(c.jsx)("div",{className:"action-button",onClick:d,children:"+"})})]})},z=function(){return Object(c.jsx)(A,{className:"pano",xml:"".concat("/react-krpano-examples","/xml/load-xml.xml")})},G=(n(44),[{name:"scene0",imageTagAttributes:{tilesize:256,baseindex:0},images:[{type:"cube",url:"https://qhrenderpicoss.kujiale.com/r/2020/11/08/L3D222S21ENDIK37RIAUI5L7ELUF3P3WO888.0_6000x1000.jpg_%s?x-oss-process=image/resize,w_256",tiledImageWidth:256,tiledImageHeight:256,asPreview:!0},{type:"cube",url:"https://qhrenderpicoss.kujiale.com/r/2020/11/08/L3D222S21ENDIK37RIAUI5L7ELUF3P3WO888.0_6000x1000.jpg_%s?x-oss-process=image/resize,w_512|image/indexcrop,x_256,i_%h|image/indexcrop,y_256,i_%v",tiledImageWidth:512,tiledImageHeight:512},{type:"cube",url:"https://qhrenderpicoss.kujiale.com/r/2020/11/08/L3D222S21ENDIK37RIAUI5L7ELUF3P3WO888.0_6000x1000.jpg_%s?x-oss-process=image/indexcrop,x_256,i_%h|image/indexcrop,y_256,i_%v",tiledImageWidth:1200,tiledImageHeight:1200}]},{name:"scene1",images:[{type:"cube",url:"https://qhyxpicoss.kujiale.com/r/2017/09/01/L3D221IS3QKUQUQBOGAPEK3P3XU888_7500x1250.jpg_%s"}]}]),X=function(){var e=r.a.useState(0),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.jsx)("div",{className:"page-switch-scene",children:Object(c.jsx)(A,{className:"pano",currentScene:G[n].name,children:G.map((function(e,t){return Object(c.jsxs)(Q,Object(m.a)(Object(m.a)({},e),{},{children:[Object(c.jsx)(M,{name:"hotspot0",type:"image",url:"https://0xllllh.github.io/krpano-examples/images/hotspot.png",ath:0,atv:0,onClick:function(){a((t+1)%G.length)}}),Object(c.jsx)(K,{fov:90,fovMin:80,fovMax:120})]}),e.name)}))})})},J=(n(45),[{name:"scene0",images:[{type:"cube",url:"https://qhyxpicoss.kujiale.com/r/2017/09/01/L3D221IS3QKUQUQBOGAPEK3P3XU888_7500x1250.jpg_%s"}]},{name:"scene1",images:[{type:"cube",url:"https://qhrenderpicoss.kujiale.com/r/2020/11/08/L3D222S21ENDIK37RIAUI5L7ELUF3P3WO888.0_6000x1000.jpg_%s"}]}]),Z=function(){var e=r.a.useState(J[0].name),t=Object(u.a)(e,2),n=t[0],a=t[1],i=r.a.useCallback((function(e){return function(){return a(e)}}),[a]);return Object(c.jsxs)("div",{className:"page-switch-scene",children:[Object(c.jsx)(A,{className:"pano",currentScene:n,children:J.map((function(e){return Object(c.jsx)(Q,Object(m.a)({},e),e.name)}))}),Object(c.jsx)("div",{className:"scene-list",children:J.map((function(e){return Object(c.jsx)("div",{className:"scene-list-item ".concat(e.name===n?"active":""),onClick:i(e.name),children:Object(c.jsx)("img",{src:e.previewUrl||e.images[0].url.replace("%s","f"),alt:e.name})},e.name)}))})]})};var V=function(){return Object(c.jsxs)(j,{className:"App",children:[Object(c.jsx)(f,{}),Object(c.jsxs)(d,{children:[Object(c.jsx)(b,{}),Object(c.jsx)(p,{children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:"/",exact:!0,children:Object(c.jsx)(l.a,{to:"/load-xml"})}),Object(c.jsx)(l.b,{path:"/load-xml",children:Object(c.jsx)(z,{})}),Object(c.jsx)(l.b,{path:"/switch-scene",children:Object(c.jsx)(Z,{})}),Object(c.jsx)(l.b,{path:"/dynamic-hotspot",children:Object(c.jsx)(B,{})}),Object(c.jsx)(l.b,{path:"/multires",children:Object(c.jsx)(X,{})})]})})]})]})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(s.a,{children:Object(c.jsx)(V,{})})}),document.getElementById("root")),Y()}},[[46,1,2]]]);
//# sourceMappingURL=main.3860fb65.chunk.js.map