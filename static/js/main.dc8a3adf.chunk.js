(this["webpackJsonpreact-krpano-examples"]=this["webpackJsonpreact-krpano-examples"]||[]).push([[0],{37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},45:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),s=c.n(a),i=c(22),r=c.n(i),o=c(16),l=(c(37),c(3)),j=(c(38),c(7)),d=(c(39),function(e){var t=e.className,c=void 0===t?"":t,a=e.justifyContent,s=e.children;return Object(n.jsx)("div",{className:"flex-container h-stack ".concat(c),style:{justifyContent:a},children:s})}),u=function(e){var t=e.className,c=void 0===t?"":t,a=e.justifyContent,s=e.children;return Object(n.jsx)("div",{className:"flex-container v-stack ".concat(c),style:{justifyContent:a},children:s})},b=function(e){var t=e.flex,c=e.children;return Object(n.jsx)("div",{className:"flex-item",style:{flex:t},children:c})},p=(c(40),function(e){var t=e.children,c=e.path,a=e.exact,s=Object(l.g)({path:c,exact:a});return Object(n.jsx)("div",{className:"aside-menu-item ".concat(s?"active":""),children:Object(n.jsx)(o.b,{className:"aside-menu-item-link",to:c,children:t})})}),h=function(){var e=a.useState(window.innerWidth<=750),t=Object(j.a)(e,2),c=t[0],s=t[1],i=a.useCallback((function(){s(!c)}),[c,s]);return Object(n.jsx)("aside",{className:"app-aside ".concat(c?"collapsed":""),children:Object(n.jsxs)(u,{children:[Object(n.jsx)("div",{className:"aside-title",children:"React Krpano Examples"}),Object(n.jsxs)(u,{className:"aside-menu",children:[Object(n.jsx)(p,{path:"/load-xml",children:"\u52a0\u8f7dXML"}),Object(n.jsx)(p,{path:"/switch-scene",children:"\u5207\u6362\u573a\u666f"}),Object(n.jsx)(p,{path:"/multires",children:"\u591a\u5206\u8fa8\u7387"}),Object(n.jsx)(p,{path:"/dynamic-hotspot",children:"\u52a8\u6001\u70ed\u70b9"}),Object(n.jsx)(p,{path:"/redux",children:"Redux"})]}),Object(n.jsxs)("div",{className:"aside-toggle-bar",onClick:i,children:[Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("span",{})]})]})})},m=(c(45),function(){return Object(n.jsx)("a",{href:"https://github.com/0xLLLLH/react-krpano-examples",target:"_blank",className:"github-corner","aria-label":"View source on Github",rel:"noreferrer",children:Object(n.jsxs)("svg",{viewBox:"0 0 250 250","aria-hidden":"true",children:[Object(n.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),Object(n.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),Object(n.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"octo-body"})]})})}),x=c(6),O=c(12),f=c(4),g=(c(47),function(){var e=s.a.useState([]),t=Object(j.a)(e,2),c=t[0],a=t[1],i=s.a.useState(null),r=Object(j.a)(i,2),o=r[0],l=r[1],d=s.a.useCallback((function(){a([].concat(Object(O.a)(c),[{name:"hotspot".concat(c.length),ath:(null===o||void 0===o?void 0:o.get("view.hlookat"))||0,atv:(null===o||void 0===o?void 0:o.get("view.vlookat"))||0,style:"hotspot-style"}]))}),[c,o]);return Object(n.jsxs)("div",{className:"page-dynamic-hotspot",children:[Object(n.jsx)(f.b,{xml:"".concat("/react-krpano-examples","/xml/dynamic-hotspot.xml"),className:"pano",currentScene:"scene0",onReady:l,children:Object(n.jsx)(f.c,{name:"scene0",images:[{type:"cube",url:"https://qhyxpicoss.kujiale.com/r/2017/09/01/L3D221IS3QKUQUQBOGAPEK3P3XU888_7500x1250.jpg_%s"}],children:c.map((function(e){return Object(n.jsx)(f.a,Object(x.a)({},e),e.name)}))})}),Object(n.jsx)("div",{className:"action-bar",children:Object(n.jsx)("div",{className:"action-button",onClick:d,children:"+"})})]})}),v=function(){return Object(n.jsx)(f.b,{className:"pano",xml:"".concat("/react-krpano-examples","/xml/load-xml.xml")})},y=(c(48),[{name:"scene0",imageTagAttributes:{tilesize:256,baseindex:0},images:[{type:"cube",url:"https://qhrenderpicoss.kujiale.com/r/2020/11/08/L3D222S21ENDIK37RIAUI5L7ELUF3P3WO888.0_6000x1000.jpg_%s?x-oss-process=image/resize,w_256",tiledImageWidth:256,tiledImageHeight:256,asPreview:!0},{type:"cube",url:"https://qhrenderpicoss.kujiale.com/r/2020/11/08/L3D222S21ENDIK37RIAUI5L7ELUF3P3WO888.0_6000x1000.jpg_%s?x-oss-process=image/resize,w_512|image/indexcrop,x_256,i_%h|image/indexcrop,y_256,i_%v",tiledImageWidth:512,tiledImageHeight:512},{type:"cube",url:"https://qhrenderpicoss.kujiale.com/r/2020/11/08/L3D222S21ENDIK37RIAUI5L7ELUF3P3WO888.0_6000x1000.jpg_%s?x-oss-process=image/indexcrop,x_256,i_%h|image/indexcrop,y_256,i_%v",tiledImageWidth:1200,tiledImageHeight:1200}]},{name:"scene1",images:[{type:"cube",url:"https://qhyxpicoss.kujiale.com/r/2017/09/01/L3D221IS3QKUQUQBOGAPEK3P3XU888_7500x1250.jpg_%s"}]}]),C=function(){var e=s.a.useState(0),t=Object(j.a)(e,2),c=t[0],a=t[1];return Object(n.jsx)("div",{className:"page-switch-scene",children:Object(n.jsx)(f.b,{className:"pano",currentScene:y[c].name,children:y.map((function(e,t){return Object(n.jsxs)(f.c,Object(x.a)(Object(x.a)({},e),{},{children:[Object(n.jsx)(f.a,{name:"hotspot0",type:"image",url:"https://0xllllh.github.io/krpano-examples/images/hotspot.png",ath:0,atv:0,onClick:function(){a((t+1)%y.length)}}),Object(n.jsx)(f.d,{fov:90,fovMin:80,fovMax:120})]}),e.name)}))})})},I=(c(49),[{name:"scene0",images:[{type:"cube",url:"https://qhyxpicoss.kujiale.com/r/2017/09/01/L3D221IS3QKUQUQBOGAPEK3P3XU888_7500x1250.jpg_%s"}]},{name:"scene1",images:[{type:"cube",url:"https://qhrenderpicoss.kujiale.com/r/2020/11/08/L3D222S21ENDIK37RIAUI5L7ELUF3P3WO888.0_6000x1000.jpg_%s"}]}]),k=function(){var e=s.a.useState(I[0].name),t=Object(j.a)(e,2),c=t[0],a=t[1],i=s.a.useCallback((function(e){return function(){return a(e)}}),[a]);return Object(n.jsxs)("div",{className:"page-switch-scene",children:[Object(n.jsx)(f.b,{className:"pano",currentScene:c,enableLogger:!0,children:I.map((function(e){return Object(n.jsx)(f.c,Object(x.a)({},e),e.name)}))}),Object(n.jsx)("div",{className:"scene-list",children:I.map((function(e){return Object(n.jsx)("div",{className:"scene-list-item ".concat(e.name===c?"active":""),onClick:i(e.name),children:Object(n.jsx)("img",{src:e.previewUrl||e.images[0].url.replace("%s","f"),alt:e.name})},e.name)}))})]})},N=c(20),S=c(13),L=Object(S.b)("pano/loadPano"),_=Object(S.b)("pano/changeCurrentScene"),U=Object(S.b)("pano/addScene"),P=Object(S.b)("pano/addHotspot"),w=Object(S.c)({currentScene:"default",scenes:{byId:{default:{name:"default",hotspotIds:[],images:[{type:"cube",url:"https://qhyxpicoss.kujiale.com/r/2017/09/01/L3D221IS3QKUQUQBOGAPEK3P3XU888_7500x1250.jpg_%s"}]}},ids:["default"]},hotspots:{byId:{},ids:[]}},(function(e){e.addCase(L,(function(e,t){e.currentScene=t.payload.currentScene,e.scenes=t.payload.scenes,e.hotspots=t.payload.hotspots})).addCase(_,(function(e,t){e.currentScene=t.payload})).addCase(U,(function(e,t){var c=t.payload.name;e.scenes.byId[c]=t.payload,e.scenes.ids=[].concat(Object(O.a)(e.scenes.ids),[c])})).addCase(P,(function(e,t){var c=t.payload.name;e.hotspots.byId[c]=t.payload,e.hotspots.ids=[].concat(Object(O.a)(e.hotspots.ids),[c]),e.scenes.byId[e.currentScene].hotspotIds=[].concat(Object(O.a)(e.scenes.byId[e.currentScene].hotspotIds),[c])}))})),E=Object(S.a)({reducer:w}),K=N.c,Q=c(54),D="PanoState",A={name:"default",images:[{type:"cube",url:"https://qhyxpicoss.kujiale.com/r/2017/09/01/L3D221IS3QKUQUQBOGAPEK3P3XU888_7500x1250.jpg_%s"}],hotspotIds:[]},q={currentScene:"default",scenes:{byId:{default:A},ids:[A.name]},hotspots:{byId:{},ids:[]}},F=0,B=function(){var e=K((function(e){return e})),t=K((function(e){return e.currentScene})),c=K((function(e){return e.scenes.ids.map((function(t){return e.scenes.byId[t]}))})),a=K((function(e){return e.hotspots.ids.length})),i=K((function(e){return e.hotspots.byId})),r=Object(N.b)(),o=s.a.useState(null),l=Object(j.a)(o,2),d=l[0],u=l[1],b=s.a.useCallback((function(e){u(e),new Promise((function(e){var t=localStorage.getItem(D);if(null===t)e(q);else try{e(JSON.parse(t))}catch(c){e(q)}})).then((function(e){r(L(e))}))}),[]),p=s.a.useCallback((function(){r(P({name:"hotspot".concat(a+1),ath:(null===d||void 0===d?void 0:d.get("view.hlookat"))||0,atv:(null===d||void 0===d?void 0:d.get("view.vlookat"))||0,style:"hotspot-style"}))}),[d,a]),h=s.a.useCallback((function(){var t;(t=e,new Promise((function(e){localStorage.setItem(D,JSON.stringify(t)),e()}))).then((function(){window.alert("pano saved")}))}),[e]),m=s.a.useCallback((function(){(F++,Promise.resolve(Object(x.a)(Object(x.a)({},A),{},{name:"sc".concat(Object(Q.a)()),images:[{type:"cube",url:F%2===0?"https://qhyxpicoss.kujiale.com/r/2017/09/01/L3D221IS3QKUQUQBOGAPEK3P3XU888_7500x1250.jpg_%s":"https://qhrenderpicoss.kujiale.com/r/2020/11/08/L3D222S21ENDIK37RIAUI5L7ELUF3P3WO888.0_6000x1000.jpg_%s"}]}))).then((function(e){r(U(e)),alert("new scene added")}))}),[]);return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(f.b,{xml:"".concat("/react-krpano-examples","/xml/dynamic-hotspot.xml"),className:"pano",currentScene:t,onReady:b,enableLogger:!0,children:c.map((function(e){return Object(n.jsx)(f.c,Object(x.a)(Object(x.a)({},e),{},{children:e.hotspotIds.map((function(e){return i[e]})).map((function(e){return Object(n.jsx)(f.a,Object(x.a)({},e),e.name)}))}),e.name)}))}),Object(n.jsxs)("div",{className:"action-bar",children:[Object(n.jsx)("div",{className:"action-button",onClick:p,children:"+"}),Object(n.jsx)("div",{className:"action-button",onClick:h,children:"\ud83d\udce5"})]}),Object(n.jsxs)("div",{className:"scene-list",children:[c.map((function(e){return Object(n.jsx)("div",{className:"scene-list-item ".concat(e.name===t?"active":""),onClick:(c=e.name,function(){return r(_(c))}),children:Object(n.jsx)("img",{src:e.previewUrl||e.images[0].url.replace("%s","f"),alt:e.name})},e.name);var c})),Object(n.jsx)("div",{className:"scene-list-item scene-list-item--add",onClick:m,children:"+"})]})]})},R=(c(51),function(){return Object(n.jsx)("div",{className:"page-redux",children:Object(n.jsx)(N.a,{store:E,children:Object(n.jsx)(B,{})})})});var W=function(){return Object(n.jsxs)(u,{className:"App",children:[Object(n.jsx)(m,{}),Object(n.jsxs)(d,{children:[Object(n.jsx)(h,{}),Object(n.jsx)(b,{children:Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{path:"/",exact:!0,children:Object(n.jsx)(l.a,{to:"/load-xml"})}),Object(n.jsx)(l.b,{path:"/load-xml",children:Object(n.jsx)(v,{})}),Object(n.jsx)(l.b,{path:"/switch-scene",children:Object(n.jsx)(k,{})}),Object(n.jsx)(l.b,{path:"/dynamic-hotspot",children:Object(n.jsx)(g,{})}),Object(n.jsx)(l.b,{path:"/multires",children:Object(n.jsx)(C,{})}),Object(n.jsx)(l.b,{path:"/redux",children:Object(n.jsx)(R,{})})]})})]})]})},G=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,55)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(o.a,{children:Object(n.jsx)(W,{})})}),document.getElementById("root")),G()}},[[52,1,2]]]);
//# sourceMappingURL=main.dc8a3adf.chunk.js.map